{"version":3,"file":"index.c878540f.js","sources":["../../vite/modulepreload-polyfill","../../src/components/choose-options.tsx","../../src/components/edit-info.tsx","../../src/components/pannel.tsx","../../src/App.tsx","../../src/main.tsx"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","/*\n * @Date: 2022-02-28 18:56:36\n * @Author: wang0122xl@163.com\n * @LastEditors: wang0122xl@163.com\n * @LastEditTime: 2022-03-08 10:09:43\n * @Description: file content\n */\n\nimport { MouseEvent, useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport './options.less'\nimport { CirclePicker } from 'react-color'\nimport 'react-color'\n\ntype Option = {\n    width: number\n    alpha: number\n    color: string\n}\nconst Options = (props: {\n    rect: DOMRect\n    onCancel: () => void\n    onConfirm: (values: Option) => void\n}) => {\n    const [width, setWidth] = useState('2')\n    const [alpha, setAlpha] = useState('1')\n    const [color, setColor] = useState<string>('#f44336')\n    return (\n        <div className=\"options\" style={{\n            top: props.rect.top,\n            left: props.rect.left - 290\n        }}>\n             <p>画笔粗细：</p>\n             <input value={width} onChange={e => setWidth(e.target.value)} />\n             <p>透明度：</p>\n             <input value={alpha} onChange={e => setAlpha(e.target.value)} />\n             <div>\n             <CirclePicker color={color} onChange={c => setColor(c.hex)} />\n             </div>\n\n             <div className=\"flex items-center mt-20px\">\n                 <button className=\"flex-1 mr-10px\" onClick={() => {\n                     props.onConfirm({\n                         width: parseFloat(width) || 2,\n                         alpha: parseFloat(alpha) || 1,\n                         color\n                     })\n                 }}>确认</button>\n                 <button className=\"flex-1\" onClick={props.onCancel}>取消</button>\n             </div>\n        </div>\n    )\n}\n\nconst chooseOptions = (e: MouseEvent): Promise<Option> => {\n    const rect = (e.target as HTMLParagraphElement).getBoundingClientRect()\n    return new Promise((resolve, reject) => {\n        let div = document.createElement('div')\n        div.style.position = 'fixed'\n        div.style.left = '0'\n        div.style.right = '0'\n        div.style.bottom = '0'\n        div.style.top = '0'\n        div.style.zIndex = '2'\n        document.body.appendChild(div)\n\n        const close = () => {\n            ReactDOM.unmountComponentAtNode(div)\n            document.body.removeChild(div)\n            div = null as any\n        }\n\n        ReactDOM.render(\n            <Options\n                rect={rect}\n                onCancel={() => {\n                    close()\n                    reject()\n                }}\n                onConfirm={t => {\n                    close()\n                    resolve(t)\n                }}\n            />,\n            div\n        )\n    })\n}\n\nexport default chooseOptions\n","/*\n * @Date: 2022-02-28 18:56:36\n * @Author: wang0122xl@163.com\n * @LastEditors: wang0122xl@163.com\n * @LastEditTime: 2022-03-08 09:42:04\n * @Description: file content\n */\n\nimport { MouseEvent, useState } from \"react\"\nimport ReactDOM from \"react-dom\"\nimport './options.less'\nimport 'react-color'\nimport { P5ToolBaseInfo } from \"p5tools/src/tools/baseTool\"\n\nconst InfoLayer = (props: {\n    info?: P5ToolBaseInfo\n    onCancel: () => void\n    onConfirm: (values: P5ToolBaseInfo) => void\n}) => {\n    const [info, setInfo] = useState<P5ToolBaseInfo | undefined>(props.info)\n\n    return (\n        <div className=\"w-250px bg-white flex flex-col p-20px children:(my-5px)\">\n             <p>标题: </p>\n             <input value={info?.title || ''} onChange={e => setInfo({\n                 ...info,\n                 title: e.target.value\n             })} />\n             <p>备注: </p>\n             <input value={info?.remark || ''} onChange={e => setInfo({\n                 ...info,\n                 remark: e.target.value\n             })} />\n             <p>其他信息: </p>\n             <input value={info?.others || ''} onChange={e => setInfo({\n                 ...info,\n                 others: e.target.value\n             })} />\n\n             <div className=\"flex items-center mt-20px\">\n                 <button className=\"flex-1 mr-10px\" onClick={() => {\n                     props.onConfirm({\n                         ...info,\n                         time: new Date().getTime()\n                     })\n                 }}>确认</button>\n                 <button className=\"flex-1\" onClick={props.onCancel}>取消</button>\n             </div>\n        </div>\n    )\n}\n\nconst editInfo = (info?: P5ToolBaseInfo): Promise<P5ToolBaseInfo | false> => {\n    return new Promise((resolve) => {\n        let div = document.createElement('div')\n        div.style.position = 'fixed'\n        div.style.left = '0'\n        div.style.right = '0'\n        div.style.bottom = '0'\n        div.style.top = '0'\n        div.style.display = 'flex'\n        div.style.alignItems = 'center'\n        div.style.justifyContent = 'center'\n        document.body.appendChild(div)\n\n        const close = () => {\n            ReactDOM.unmountComponentAtNode(div)\n            document.body.removeChild(div)\n            div = null as any\n        }\n\n        ReactDOM.render(\n            <InfoLayer\n                info={info}\n                onCancel={() => {\n                    close()\n                    resolve(false)\n                }}\n                onConfirm={t => {\n                    close()\n                    resolve(t)\n                }}\n            />,\n            div\n        )\n    })\n}\n\nexport default editInfo\n","/*\n * @Date: 2022-02-28 18:40:59\n * @Author: wang0122xl@163.com\n * @LastEditors: wang0122xl@163.com\n * @LastEditTime: 2022-03-10 22:03:04\n * @Description: file content\n */\nimport { MouseEvent, useEffect, useState } from 'react'\nimport chooseOptions from './choose-options'\nimport './pannel.less'\nimport P5ToolsManager from 'p5tools/src/manager'\nimport P5 from 'p5'\nimport emitter, { EMITTER_ANNOTATION_CROPPED, EMITTER_ANNOTATION_INFO_UPDATED } from 'p5tools/src/utils/emitter'\nimport { P5ToolAnnotation, P5ToolBaseInfo } from 'p5tools/src/tools/baseTool'\nimport moment from 'moment'\nimport editInfo from './edit-info'\nimport CropTool from 'p5tools/src/tools/cropTool'\n\nconst Pannel = (props: {\n    manager?: P5ToolsManager\n    sk?: P5\n}) => {\n    if (!props.manager) {\n        return null\n    }\n    const [showAnnotations, setShowAnnotations] = useState(true)\n    const [annotations, setAnnotations] = useState<P5ToolAnnotation[]>([])\n\n    const [showImages, setShowImages] = useState(false)\n    const [images, setImages] = useState<{\n        info: P5ToolBaseInfo,\n        url: string\n    }[]>([])\n\n    const sortFunc = (a: any, b: any) => {\n        const aTime = moment(a.info.time)\n        const bTime = moment(b.info.time)\n        if (aTime.isAfter(bTime)) {\n            return -1\n        } else {\n            return 1\n        }\n    }\n\n    const getAnnotations = () => {\n        const temp = props.manager!\n            .getAllAnnotations()\n            .sort(sortFunc)\n        setAnnotations(temp)\n    }\n    const getImages = () => {\n        const cropTool = props.manager?.findTool(P5ToolsManager.CropTool.toolName) as unknown as CropTool\n        const temp = cropTool.images.sort(sortFunc)\n        setImages([...temp])\n    }\n\n    useEffect(() => {\n        emitter.on(EMITTER_ANNOTATION_INFO_UPDATED, getAnnotations)\n        emitter.on(EMITTER_ANNOTATION_CROPPED, getImages)\n        return () => {\n            emitter.removeListener(EMITTER_ANNOTATION_INFO_UPDATED, getAnnotations)\n            emitter.removeListener(EMITTER_ANNOTATION_CROPPED, getImages)\n        }\n    }, [])\n\n    const selectTool = async (e: MouseEvent, toolName: string) => {\n        try {\n            const option = await chooseOptions(e)\n            props.sk?.cursor(props.sk.ARROW)\n\n            if (toolName === P5ToolsManager.TextTool.toolName) {\n                props.manager!.setToolEnabled(toolName, {\n                    fillColor: option.color,\n                    strokeAlpha: option.alpha,\n                    textSize: option.width\n                })\n            } else {\n                props.manager!.setToolEnabled(toolName, {\n                    strokeColor: option.color,\n                    strokeAlpha: option.alpha,\n                    strokeWeight: option.width\n                })\n            }\n        } catch (e) {\n            props.manager!.quitTool()\n        }\n\n    }\n\n    const doCrop = () => {\n        if (props.sk) {\n            props.sk?.cursor(props.sk?.CROSS)\n\n            props.manager!.setToolEnabled(P5ToolsManager.CropTool.toolName, {\n                strokeColor: 'blue'\n            })\n        }\n    }\n\n    const doEdit = async (anno: P5ToolAnnotation) => {\n        const info = await editInfo(anno.info)\n        if (info) {\n            anno.info = info\n            getAnnotations()\n        }\n    }\n\n    const doDelete = (anno: P5ToolAnnotation) => {\n        anno.remove()\n        getAnnotations()\n    }\n\n    const deleteImage = (img: {\n        info: P5ToolBaseInfo,\n        url: string\n    }) => {\n        const cropTool = props.manager!.findTool(P5ToolsManager.CropTool.toolName) as unknown as CropTool\n        const index = cropTool.images.indexOf(img)\n        cropTool.images.splice(index, 1)\n        getImages()\n    }\n\n    return (\n        <>\n            <div className=\"common-pannel pannel\">\n                <p onClick={e => selectTool(e, P5ToolsManager.CircleTool.toolName)}>圆形</p>\n                <p onClick={e => selectTool(e, P5ToolsManager.SquareTool.toolName)}>方形</p>\n                <p onClick={e => selectTool(e, P5ToolsManager.TextTool.toolName)}>文字</p>\n                <p onClick={e => selectTool(e, P5ToolsManager.LineTool.toolName)}>直线</p>\n                <p onClick={e => selectTool(e, P5ToolsManager.ArrowLineTool.toolName)}>箭头</p>\n\n                <p onClick={e => selectTool(e, P5ToolsManager.FreehandTool.toolName)}>freehand</p>\n                <p onClick={e => doCrop()}>裁剪</p>\n                <p onClick={e => {\n                    if (!showAnnotations) {\n                        setShowImages(false)\n                    }\n                    setShowAnnotations(!showAnnotations)\n                }}>{showAnnotations ? '隐藏标注' : '显示标注'}</p>\n                <p onClick={e => {\n                    if (!showImages) {\n                        setShowAnnotations(false)\n                    }\n                    setShowImages(!showImages)\n                }}>{showImages ? '隐藏截图' : '显示截图'}</p>\n\n            </div>\n            {\n                showAnnotations && <div className='common-pannel annotations-layer'>\n                    <div className='title outer sticky top-0 bg-white'>\n                        标注信息\n                    </div>\n                    {\n                        annotations.map(anno => {\n                            if (anno.belong === P5ToolsManager.CropTool.toolName) {\n                                return null\n                            }\n                            return (\n                                <div key={`annotation-${anno.info.time}`} className='items-center outer'>\n                                    <span className='text-15px font-500'>{anno.belong}</span>\n                                    <div className='flex flex-col space-y-5px !py-5px flex-1 !mx-15px w-0'>\n                                        <span>标题: {anno.info.title}</span>\n                                        <span>备注: {anno.info.remark}</span>\n                                        <span>其他信息: {anno.info.others}</span>\n                                        <span>时间: {moment(anno.info.time).format('DD HH:mm:ss')}</span>\n                                    </div>\n\n                                    <div className='flex flex-col space-y-10px children:(h-25px)'>\n                                        <button onClick={() => doEdit(anno)}>编辑</button>\n                                        <button onClick={() => doDelete(anno)}>删除</button>\n                                    </div>\n                                </div>\n                            )\n                        })\n                    }\n                </div>\n            }\n            {\n                showImages && (\n                    <div className='common-pannel images-layer'>\n                        <div className='title outer sticky top-0 bg-white'>\n                            截图\n                        </div>\n                        {\n                            images.map((img, index) => (<div className='flex flex-col space-y-5px outer' key={`image-${img.info.time}`}>\n                                <span className='font-500 text-15px'>标题: {img.info.title}</span>\n                                <span>时间: {moment(img.info.time).format('YYYY-MM-DD HH:mm')}</span>\n                                <div className='flex items-center !mx-0 !py-0'>\n                                    <img className='flex-1 w-0 mr-10px' src={img.url} />\n                                    <button onClick={() => deleteImage(img)}>删除</button>\n                                </div>\n                            </div>))\n                        }\n                    </div>\n                )\n            }\n        </>\n    )\n}\n\nexport default Pannel\n","/*\n * @Date: 2022-03-08 09:24:16\n * @Author: wang0122xl@163.com\n * @LastEditors: wang0122xl@163.com\n * @LastEditTime: 2022-03-10 22:03:01\n * @Description: file content\n */\nimport { useCallback, useEffect, useRef, useState } from 'react'\nimport OpenSeadragon, { Point, TileSource } from 'openseadragon'\nimport './App.css'\nimport { createPortal } from 'react-dom'\nimport Pannel from './components/pannel'\nimport P5ToolsManager from 'p5tools/src/manager'\nimport P5 from 'p5'\nimport CropTool from 'p5tools/src/tools/cropTool'\nimport { promisifyToBlob } from 'p5tools/src/utils'\n\n\nfunction App() {\n    const domEl = useRef<HTMLDivElement>(null!)\n\n    const [initialScale, setInitialScale] = useState<number>()\n    const [initialTranslate, setInitialTranslate] = useState<Point>()\n    const [cropPosition, setCropPosition] = useState<{\n        visible: boolean\n        x?: number\n        y?: number\n    }>()\n\n    const [pannelVisible, setPannelVisible] = useState(true)\n    const [viewer, setViewer] = useState<OpenSeadragon.Viewer>()\n    const [toolsManager] = useState<P5ToolsManager>(() => {\n        const textTool = new P5ToolsManager.TextTool()\n        const circleTool = new P5ToolsManager.CircleTool()\n        const squareTool = new P5ToolsManager.SquareTool()\n        const lineTool = new P5ToolsManager.LineTool()\n        const freehandTool = new P5ToolsManager.FreehandTool()\n        const arrowLineTool = new P5ToolsManager.ArrowLineTool()\n        const cropTool = new P5ToolsManager.CropTool()\n        const manager = new P5ToolsManager()\n\n        textTool.getToolInfo = () => Promise.resolve({\n            time: new Date().getTime(),\n            title: prompt('请输入')!\n        })\n        arrowLineTool.getToolInfo = () => Promise.resolve({\n            time: new Date().getTime(),\n            title: prompt('请输入')!\n        })\n\n        cropTool.startRect = () => {\n            setCropPosition({\n                visible: false\n            })\n        }\n        cropTool.endRect = ({ startX, startY }) => {\n            setCropPosition({\n                visible: true,\n                x: startX,\n                y: startY\n            })\n        }\n        manager\n            .useTool(textTool)\n            .useTool(circleTool)\n            .useTool(squareTool)\n            .useTool(lineTool)\n            .useTool(freehandTool)\n            .useTool(arrowLineTool)\n            .useTool(cropTool as any)\n        return manager\n    })\n    const [sk, setSK] = useState<P5>()\n\n    const tileSource = useRef<any>(new TileSource({\n        width: 7026,\n        height: 9221,\n        tileSize: 256,\n        tileOverlap: 2,\n        getTileUrl(level, x, y) {\n            return `//openseadragon.github.io//example-images/highsmith/highsmith_files/${level}/${x}_${y}.jpg`\n        }\n    }))\n\n    const initSeadragon = (ele: HTMLDivElement) => {\n        const viewer = OpenSeadragon({\n            element: ele,\n            crossOriginPolicy: 'Anonymous',\n            // 不显示基础导航按钮\n            showNavigationControl: false,\n            // 显示小地图\n            showNavigator: true,\n            navigatorAutoFade: false,\n            // 小地图自动缩放,关闭以提高性能\n            navigatorAutoResize: false,\n            navigatorHeight: 100,\n            navigatorWidth: 200,\n            navigatorPosition: 'TOP_LEFT',\n            // 禁止鼠标双击放大缩小\n            gestureSettingsMouse: {\n                dblClickToZoom: false,\n                clickToZoom: false\n            }\n        })\n        viewer.addHandler('full-screen', (event) => {\n            setPannelVisible(!event.fullScreen)\n        })\n        viewer.open(tileSource.current)\n        return viewer\n    }\n\n    const initP5 = useCallback(() => {\n        if (!viewer || !toolsManager || sk) {\n            return\n        }\n        viewer!.addHandler('open', openViewer)\n\n        toolsManager.hasEnabledToolCallback = has => {\n            if (has) {\n                viewer.setMouseNavEnabled(false)\n            } else {\n                viewer.setMouseNavEnabled(true)\n            }\n        }\n\n        const wrapDiv = document.createElement('div')\n        wrapDiv.style.position = 'absolute'\n        wrapDiv.style.width = '100%'\n        wrapDiv.style.height = '100%'\n        wrapDiv.style.overflow = 'hidden'\n\n        viewer.canvas.append(wrapDiv)\n\n        new P5((sketch: P5) => {\n            setSK(sketch)\n        }, wrapDiv)\n    }, [viewer, toolsManager])\n\n    useEffect(() => {\n        if (!sk || !initialTranslate) {\n            return\n        }\n        viewer!.addHandler('update-viewport', redraw)\n\n        sk.preload = () => {\n            toolsManager.preload(sk)\n        }\n        sk.setup = () => {\n            const viewerSize = viewer!.viewport.getContainerSize()\n            sk.createCanvas(viewerSize.x, viewerSize.y)\n            toolsManager.setup(sk)\n        }\n        sk.draw = () => {\n\n            (sk as any).clear()\n            const scale = getScale()\n            const translate = getTranslate()\n            toolsManager.draw(sk, scale / initialScale!, translate!.x, translate!.y )\n        }\n        sk.touchStarted = (event: any) => {\n            if (\n                event.target.nodeName === 'CANVAS' &&\n                !viewer?.isMouseNavEnabled()\n            ) {\n                toolsManager.touchStarted(sk!)\n            }\n        }\n        sk.touchMoved = () => {\n            toolsManager.touchMoved(sk)\n        }\n        sk.touchEnded = (event: any) => {\n            if (\n                event.target.nodeName === 'CANVAS' &&\n                !viewer?.isMouseNavEnabled() &&\n                toolsManager.enabledTool?.name !== P5ToolsManager.CropTool.toolName\n            ) {\n                toolsManager.touchEnded(sk)\n                toolsManager.quitTool()\n            }\n        }\n    }, [sk, initialTranslate])\n\n    useEffect(() => {\n        let viewer: OpenSeadragon.Viewer\n        if (domEl.current) {\n            viewer = initSeadragon(domEl.current)\n            setViewer(viewer)\n        }\n        return () => {\n            viewer.destroy()\n        }\n    }, [])\n\n    useEffect(() => {\n        initP5()\n    }, [initP5])\n\n    const getTranslate = () => {\n        const image = viewer?.world.getItemAt(0)\n        const vp = image!.imageToViewportCoordinates(0, 0, false)\n        return viewer?.viewport.pixelFromPoint(vp)\n    }\n    const getScale = () => {\n        return viewer!.viewport.getZoom(true)\n    }\n\n    const openViewer = () => {\n        const translate = getTranslate()\n        const scale = getScale()\n\n        setInitialScale(scale)\n        setInitialTranslate(translate)\n    }\n    const redraw = () => {\n        sk?.redraw()\n    }\n\n    const crop = async () => {\n        setCropPosition({\n            visible: false\n        })\n        \n        const tool = toolsManager.enabledTool as unknown as CropTool;\n        const blob = await promisifyToBlob(viewer?.drawer.canvas as HTMLCanvasElement)\n        sk?.loadImage(URL.createObjectURL(blob!), img => {\n            tool.doCrop(sk!, () => {\n                return Promise.resolve(sk!.image(img, 0, 0, sk.width, sk.height))\n            })\n        })\n    }\n\n    return (\n        <div>\n            <div className=\"h-100vh w-full z-1\" ref={domEl} />\n            {\n                pannelVisible && createPortal(\n                    <>\n                        <Pannel manager={toolsManager} sk={sk} />\n                        {\n                            !!cropPosition?.visible && (\n                                <div className='fixed flex items-center z-1' style={{\n                                    top: cropPosition!.y! - 35,\n                                    left: cropPosition?.x\n                                }}>\n                                    <button className='bg-white' onClick={crop}>确定</button>\n                                    <button className='bg-white ml-10px' onClick={() => {\n                                        sk?.cursor(sk.ARROW)\n                                        setCropPosition({\n                                            visible: false\n                                        });\n                                        (toolsManager.enabledTool as any).endCrop()\n                                        toolsManager.quitTool()\n                                    }}>取消</button>\n                                </div>\n                            )\n                        }\n                    </>,\n                    document.body\n                )\n            }\n            {/* {\n            innerData.controlPanelVisible && createPortal(\n                <ControlPanel />,\n                document.body\n            )\n        } */}\n        </div>\n    )\n}\n\nexport default App\n","/*\n * @Date: 2022-03-08 09:24:16\n * @Author: wang0122xl@163.com\n * @LastEditors: wang0122xl@163.com\n * @LastEditTime: 2022-03-08 09:34:37\n * @Description: file content\n */\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport 'virtual:windi.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"names":["Options","props","width","setWidth","useState","alpha","setAlpha","color","setColor","top","rect","left","_jsx","e","target","value","c","hex","_jsxs","onConfirm","parseFloat","onCancel","chooseOptions","getBoundingClientRect","Promise","resolve","reject","div","document","createElement","style","position","right","bottom","zIndex","body","appendChild","close","ReactDOM","unmountComponentAtNode","removeChild","render","t","InfoLayer","info","setInfo","title","remark","others","time","Date","getTime","editInfo","display","alignItems","justifyContent","Pannel","manager","showAnnotations","setShowAnnotations","annotations","setAnnotations","showImages","setShowImages","images","setImages","sortFunc","a","b","aTime","moment","bTime","isAfter","getAnnotations","temp","getAllAnnotations","sort","getImages","cropTool","findTool","P5ToolsManager","CropTool","toolName","useEffect","on","EMITTER_ANNOTATION_INFO_UPDATED","EMITTER_ANNOTATION_CROPPED","removeListener","selectTool","option","sk","cursor","ARROW","TextTool","setToolEnabled","fillColor","strokeAlpha","textSize","strokeColor","strokeWeight","quitTool","doCrop","CROSS","doEdit","anno","doDelete","remove","deleteImage","img","index","indexOf","splice","_Fragment","CircleTool","SquareTool","LineTool","ArrowLineTool","FreehandTool","map","belong","format","url","domEl","useRef","initialScale","setInitialScale","initialTranslate","setInitialTranslate","cropPosition","setCropPosition","pannelVisible","setPannelVisible","viewer","setViewer","toolsManager","textTool","circleTool","squareTool","lineTool","freehandTool","arrowLineTool","getToolInfo","prompt","startRect","visible","endRect","startX","startY","x","y","useTool","setSK","tileSource","TileSource","height","tileSize","tileOverlap","getTileUrl","level","initSeadragon","ele","OpenSeadragon","element","crossOriginPolicy","showNavigationControl","showNavigator","navigatorAutoFade","navigatorAutoResize","navigatorHeight","navigatorWidth","navigatorPosition","gestureSettingsMouse","dblClickToZoom","clickToZoom","addHandler","event","fullScreen","open","current","initP5","useCallback","openViewer","hasEnabledToolCallback","has","setMouseNavEnabled","wrapDiv","overflow","canvas","append","P5","sketch","redraw","preload","setup","viewerSize","viewport","getContainerSize","createCanvas","draw","clear","scale","getScale","translate","getTranslate","touchStarted","nodeName","isMouseNavEnabled","touchMoved","touchEnded","enabledTool","name","destroy","vp","image","world","getItemAt","imageToViewportCoordinates","pixelFromPoint","getZoom","crop","tool","blob","promisifyToBlob","drawer","loadImage","URL","createObjectURL","createPortal","endCrop","getElementById"],"mappings":"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"}